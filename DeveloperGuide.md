
# Configuration Manager Developer Guide

This is the developer guide for a HTTP API for managing the configuration values of a system.

# TOC (Table of Content)

* [TOC](#TOC)
    - [Building dependencies](#building-dependencies)
    - [Building the web app](#building-the-web-app)
    - [Unit testing](#unit-testing)
    - [Running the web app](#running-the-web-app)
    - [Validation testing](#validation-testing)
    - [Create an archive](#create-an-archive)
    - [Project Overview](#project-overview)

# Building Dependencies 

To build the web app you need the following software packages:

- `Python3`
- The latest version of `swagger-codegen` from this [repository](https://github.com/swagger-api/swagger-codegen)
    - `Java 8` (needed by swagger-codegen)
    - `maven` (needed by swagger-codegen)

Make sure each of those dependency has its path added to your `PATH` environment variable.

## Installation of dependencies on OSX

On OSX you can use the `brew` utility to install everything.
After you installed it (here there are some [instructions](https://brew.sh/)) you can type (from the main directory of this repository):

```
brew install python3
pip3 install -r src/app/requirements.txt
brew cask install homebrew/cask-versions/java8
brew install maven
brew install --HEAD swagger-codegen
```

## Other platforms

Other platforms are not supported yet.

# Building the web app

To build everything, if all the dependencies mentioned above are already satisfied, 
go to the main folder of the project and type:

```
invoke build
```

It will create a directory called `build` inside the current folder structured like this:

    /app
    /docs

And will execute unit testing.
If everything run smoothly ood and no errors were reported, you are now ready to go and [launch the web app](#running-the-web-app).

# Unit Testing

To launch only the unit test suite, go to the main folder of the project and type:

```bash
invoke unittest
```

Please note that unit tests are automatically launched when building the web app.
The unit testing framework used in this project is `nose` with `tox`.

If you need to modify tox settings, edit `src/app/tox.ini`.

# Running the web app

To launch the web app, please refer to [this section](Readme.md/#running-web-app).

# Create an archive

To create an archive that contains all the web server, go to the main folder of the project and type:
```
invoke deploy
```

A zip archive will be created inside the `deploy` folder with all you need
to kickstart you web app.

# Validation Testing

To launch only the validation test suite, go to the main folder of the project and type:

```bash
invoke validate
```

Please note that this command is expecting the server to be already running.
You can open a terminal and launch it by reading [this section](#running-the-web-app).

# Project Overview

The project is build by two fundamental parts:

- Business logic (contained in `src/app`)
- Boilerplate code (autogenerated from the OpenAPI specifications `src/api/swagger.yaml`)

All the boilerplate code is NOT versioned (you won't find it in a newly cloned repo) and generated only when a new build [is issued](#Building-the-web-app), inside the `build` folder.

## Folder Structure

#### src folder

A newly cloned repo comes with a directory called `src`.

Inside this folder, is contained all the business-logic dependent files that needs to be
created, modified, according to the software internal behaviour.

Once the build procedure is issued, after the boilerplate code has been generated, 
files in this folder are substituted to the boilerplate ones to implement the feature requested.

Each relevant file is documented with some inline comments to get you started. 
Here we‚Äôll go through the main ones.

```api/swagger.yaml```

This is the OpenAPI specification. From this file, **all the boilerplate code** is generated.

```app/swagger_server/controllers/configuration_controller.py```

This file contains the business logic of the whole project.
If you want to edit a particular API behaviour, **this is the main file to edit**.

```app/swagger_server/test/test_configuration_controller.py```

This file contains the unit and integration test for the whole project.
If you want to add/edit/delete a unit test, this is the main file to edit.

Inside this file, **dependency injection** was used to inject a fake database for the tests.

The only requirement to add a test, is that the 

```app/swagger_server/func_test/test/test_configuration_api.py```

This file contains the validation tests for the whole project (e.g. a particular API needs
to answer in no more than 200 ms).
If you want to add/edit/delete a validation test, this is the main file to edit.

## Linting

A Lint or a Linter is a program that supports linting (verifying code quality). 
They are available for most languages like JavaScript, CSS, HTML, Python, etc..
In this project, we use the same linting guidelines that Google Chrome uses for python projects.

The linter file is `.pylintrc`.

## Preferred Editor

You can open this project with other editors or IDEs, but the preferred editor 
to develop this project is Visual Studio Code: you can open the workspace 
`CodingChallenge.code-workspace` to start working with it!

We choose Visual Studio Code because it has nice built-in features like:
- Automatic Python Linting 
- Embedded git version control (via [Gitlens](vscode:extension/eamodio.gitlens))

## Commit Legend

In this project, we try to put an expressive emoji at the begin of each commit.

Using emojis on commit messages provides an easy way of identifying the 
purpose or intention of a commit with only looking at the emojis used 
(and moreover, it's fun!). 


Commit Type | Emoji
----------  | -----
Initial Commit  | [üéâ Party Popper](http://emojipedia.org/party-popper/)
Version Tag     | [üîñ Bookmark](http://emojipedia.org/bookmark/)
New Feature     | [‚ú® Sparkles](http://emojipedia.org/sparkles/)
Bugfix          | [üêõ Bug](http://emojipedia.org/bug/)
Security Fix    | [üîí Lock](https://emojipedia.org/lock/)
Metadata        | [üìá Card Index](http://emojipedia.org/card-index/)
Refactoring     | [‚ôªÔ∏è Black Universal Recycling Symbol](http://emojipedia.org/black-universal-recycling-symbol/)
Documentation   | [üìö Books](http://emojipedia.org/books/)
Internationalization | [üåê Globe With Meridians](http://emojipedia.org/globe-with-meridians/)
Accessibility   | [‚ôø Wheelchair](https://emojipedia.org/wheelchair-symbol/)
Performance     | [üêé Horse](http://emojipedia.org/horse/)
Cosmetic        | [üé® Artist Palette](http://emojipedia.org/artist-palette/)
Tooling         | [üîß Wrench](http://emojipedia.org/wrench/)
Tests           | [üö® Police Cars Revolving Light](http://emojipedia.org/police-cars-revolving-light/)
Deprecation     | [üí© Pile of Poo](http://emojipedia.org/pile-of-poo/)
Removal         | [üóëÔ∏è Wastebasket](http://emojipedia.org/wastebasket/)
Work In Progress (WIP) | [üöß Construction Sign](http://emojipedia.org/construction-sign/)

### Using Emoji is Hard! üò°

Here are some ways to more easily integrate emoji into your workflow.

#### OSX Emojis

You can pull up the emoji keyboard by hitting <kbd>ctrl</kbd>+<kbd>‚åò</kbd>+<kbd>space</kbd>